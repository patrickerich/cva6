<?xml version="1.0" encoding="UTF-8"?>
<board
    schema_version="2.1"
    vendor="alinx.com"
    name="axku5"
    display_name="ALINX AXKU5 Kintex UltraScale+ Board"
    url="http://www.alinx.com.cn"
    preset_file="preset.xml">

    <file_version>1.0</file_version>

    <compatible_board_revisions>
        <revision id="1">1.1</revision>
    </compatible_board_revisions>

    <description>
        Kintex UltraScale+ AXKU5 board based on XCKU5P-FFVB676-2I with DDR4,
        Ethernet, HDMI, microSD (SPI), USB-UART, user LEDs and keys.
    </description>

    <components>

        <!-- Main FPGA device -->
        <component
            name="part0"
            display_name="XCKU5P FPGA"
            type="fpga"
            vendor="xilinx"
            part_name="xcku5p-ffvb676-2-i"
            pin_map_file="part0_pins.xml">

            <description>Main FPGA on the AXKU5 board</description>

            <interfaces>

                <!-- 200 MHz differential system clock on K22/K23 -->
                <interface
                    mode="slave"
                    name="sys_clk_200"
                    type="xilinx.com:interface:diff_clock_rtl:1.0">
                    <port_maps>
                        <port_map logical_port="CLK_P" physical_port="sys_clk_p" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="SYS_CLK_P"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="CLK_N" physical_port="sys_clk_n" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="SYS_CLK_N"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- System reset (active-low pushbutton on J14) -->
                <interface
                    mode="master"
                    name="sys_rst"
                    type="xilinx.com:interface:reset_rtl:1.0"
                    of_component="sys_reset">
                    <port_maps>
                        <port_map logical_port="RST" physical_port="sys_rst_n" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="SYS_RST_N"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- User LEDs (4 bits) -->
                <interface
                    mode="master"
                    name="user_leds_4bits"
                    type="xilinx.com:interface:gpio_rtl:1.0"
                    of_component="user_leds">
                    <port_maps>
                        <port_map logical_port="TRI_O" physical_port="user_leds_tri_o" dir="out" left="3" right="0">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="LED0"/>
                                <pin_map port_index="1" component_pin="LED1"/>
                                <pin_map port_index="2" component_pin="LED2"/>
                                <pin_map port_index="3" component_pin="LED3"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- Single user key on J15 -->
                <interface
                    mode="master"
                    name="user_key"
                    type="xilinx.com:interface:gpio_rtl:1.0"
                    of_component="user_key">
                    <port_maps>
                        <port_map logical_port="TRI_I" physical_port="user_key_tri_i" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="KEY0"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- Fan PWM output -->
                <interface
                    mode="master"
                    name="fan_pwm"
                    type="xilinx.com:interface:gpio_rtl:1.0"
                    of_component="fan">
                    <port_maps>
                        <port_map logical_port="TRI_O" physical_port="fan_pwm" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="FAN_PWM"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- USB-UART bridge (CP2102) -->
                <interface
                    mode="master"
                    name="uart0"
                    type="xilinx.com:interface:uart_rtl:1.0"
                    of_component="usb_uart">
                    <port_maps>
                        <port_map logical_port="RxD" physical_port="uart_rx" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="UART_RXD"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="TxD" physical_port="uart_tx" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="UART_TXD"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- microSD card wired in SPI mode -->
                <interface
                    mode="master"
                    name="sd_spi"
                    type="xilinx.com:interface:spi_rtl:1.0"
                    of_component="sd_card">
                    <port_maps>
                        <port_map logical_port="SCK" physical_port="sd_sck" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="SD_SCK"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="MOSI" physical_port="sd_mosi" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="SD_MOSI"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="MISO" physical_port="sd_miso" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="SD_MISO"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="SS" physical_port="sd_cs" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="SD_CS"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- RGMII Ethernet -->
                <interface
                    mode="master"
                    name="eth_rgmii"
                    type="xilinx.com:interface:rgmii_rtl:1.0"
                    of_component="eth_rgmii">
                    <port_maps>
                        <!-- TX side -->
                        <port_map logical_port="TXC" physical_port="eth_txc" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_TXCK"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="TXCTL" physical_port="eth_txctl" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_TXCTL"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="TXD" physical_port="eth_txd" dir="out" left="3" right="0">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_TXD0"/>
                                <pin_map port_index="1" component_pin="ETH_TXD1"/>
                                <pin_map port_index="2" component_pin="ETH_TXD2"/>
                                <pin_map port_index="3" component_pin="ETH_TXD3"/>
                            </pin_maps>
                        </port_map>

                        <!-- RX side -->
                        <port_map logical_port="RXC" physical_port="eth_rxc" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_RXCK"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="RXCTL" physical_port="eth_rxctl" dir="in">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_RXCTL"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="RXD" physical_port="eth_rxd" dir="in" left="3" right="0">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_RXD0"/>
                                <pin_map port_index="1" component_pin="ETH_RXD1"/>
                                <pin_map port_index="2" component_pin="ETH_RXD2"/>
                                <pin_map port_index="3" component_pin="ETH_RXD3"/>
                            </pin_maps>
                        </port_map>

                        <!-- MDIO management -->
                        <port_map logical_port="MDC" physical_port="eth_mdc" dir="out">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_MDC"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="MDIO" physical_port="eth_mdio" dir="inout">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="ETH_MDIO"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

                <!-- HDMI control / DDC / HPD -->
                <interface
                    mode="master"
                    name="hdmi_ctrl"
                    type="xilinx.com:interface:gpio_rtl:1.0"
                    of_component="hdmi_ctrl">
                    <port_maps>
                        <!-- Simple mapping: control + DDC as GPIO bundle -->
                        <port_map logical_port="TRI_O" physical_port="hdmi_ctrl_o" dir="out" left="2" right="0">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="HDMI_NRESET"/>
                                <pin_map port_index="1" component_pin="HDMI_SCL"/>
                                <pin_map port_index="2" component_pin="HDMI_SDA"/>
                            </pin_maps>
                        </port_map>
                        <port_map logical_port="TRI_IO" physical_port="hdmi_ddc" dir="inout" left="1" right="0">
                            <pin_maps>
                                <pin_map port_index="0" component_pin="HDMI_DDC_SCL_IO"/>
                                <pin_map port_index="1" component_pin="HDMI_DDC_SDA_IO"/>
                            </pin_maps>
                        </port_map>
                    </port_maps>
                </interface>

            </interfaces>
        </component>

        <!-- Logical peripherals -->
        <component name="sys_reset" display_name="System Reset Button"
                   type="chip" sub_type="push_button"
                   major_group="System Control">
            <description>Active-low system reset pushbutton on J14</description>
        </component>

        <component name="user_leds" display_name="User LEDs"
                   type="chip" sub_type="led"
                   major_group="General Purpose Input or Output"/>

        <component name="user_key" display_name="User Key"
                   type="chip" sub_type="push_button"
                   major_group="General Purpose Input or Output"/>

        <component name="fan" display_name="Fan PWM"
                   type="chip" sub_type="other"
                   major_group="System Control"/>

        <component name="usb_uart" display_name="USB-UART"
                   type="chip" sub_type="uart"
                   major_group="Communication"/>

        <component name="sd_card" display_name="microSD card (SPI mode)"
                   type="chip" sub_type="sdcard"
                   major_group="Memory"/>

        <component name="eth_rgmii" display_name="Gigabit Ethernet PHY"
                   type="chip" sub_type="ethernet"
                   major_group="Communication"/>

        <component name="hdmi_ctrl" display_name="HDMI Control & DDC"
                   type="chip" sub_type="hdmi"
                   major_group="Video and Imaging"/>

    </components>

    <jtag_chains>
        <jtag_chain name="chain0">
            <position index="0" name="part0"/>
        </jtag_chain>
    </jtag_chains>

</board>
