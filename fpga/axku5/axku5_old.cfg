source [find interface/ftdi/olimex-jtag-tiny.cfg]
transport select jtag

# External Olimex ARM-USB-TINY JTAG pod on AXKU5 J8
# Interface details (VID/PID, layout, reset pins) are taken from the
# standard OpenOCD interface config above.

reset_config none

set _CHIPNAME riscv
# Single TAP, IR length 5 (matches dmi_jtag_tap IrLength)
jtag newtap $_CHIPNAME cpu -irlen 5
set _TARGETNAME $_CHIPNAME.cpu

# Single RISC-V hart, coreid 0
target create $_TARGETNAME riscv -chain-position $_TARGETNAME -coreid 0

# JTAG adapter speed (kHz) for older 0.10-based riscv-openocd
adapter_khz 1000

# RISC-V target options (aligned with corev_apu/fpga/ariane.cfg, where supported)
riscv set_reset_timeout_sec 120
riscv set_command_timeout_sec 120
riscv set_prefer_sba off
if { [catch {riscv set_enable_virtual on} ] } {
    echo "Warning: This version of OpenOCD does not support address translation."
}

gdb_report_data_abort enable
gdb_report_register_access_error enable
gdb_breakpoint_override hard

reset_config none

init
# halt
